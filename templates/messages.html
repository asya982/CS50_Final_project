{% extends "layout.html" %}

{% block title %}
    messages
{% endblock %}

{% block main %}
<body>
    <script type="text/javascript">
        $(document).ready(function() {
            let socket = io.connect("http://localhost:5001")
            socket.on('connect', function() {
                socket.send("User connected!");
            });

            socket.on('message', function(data) {
                $('#messages').append($('<p>').text(data));
            });

            $('#sendBtn').on('click', function() {
                socket.send($('#username').val() + ': ' + $('#message').val());
                $('#message').val('');
            });
        })
    </script>
    <div id="messages">

    </div>
    <input type="hidden" id="username" value="{{ name[0]['username'] }}">
    <input type="text" id="message" placeholder="Message">
    <button id="sendBtn">Send</button>
</body>
{% endblock %}